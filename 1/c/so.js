import{PREFIX,OPEN_CLASS_NAME,FULL_DIMENSION_CLASS_NAME,FADE_IN_STRONG_CLASS_NAME}from"../cn/classes-names";import{p}from"../p";import{setUpStageManager}from"./setUpStageManager";import{createSources}from"./sources/creating/createSources";import{renderSourceWrappersContainer}from"../cm/renderSourceWrappersContainer";import{renderNav}from"../cm/nav/renderNav";import{renderSlideButtons}from"../cm/renderSlideButtons";import{renderSlideSwipingHoverer}from"../cm/renderSlideSwipingHoverer";import{s}from"./s";import{gsw}from"./scrollbar/gsw";export function so(o){var{ap,componentsServices,core:{globalEventsController,scrollbarRecompensor,sourceDisplayFacade,stageManager,windowResizeActioner},data,e,elements,props,stageIndexes,sws}=o,ii=0;o.open=(i=0)=>{var opi=stageIndexes.previous,oci=stageIndexes.current,oni=stageIndexes.next;stageIndexes.current=i;if(!ii){setUpStageManager(o)}stageManager.updateStageIndexes();if(ii){sws.c();sws.a();sws.b(opi);sws.b(oci);sws.b(oni);e("onShow")}else{ini()}sourceDisplayFacade.displaySourcesWhichShouldBeDisplayed();o.sn(i+1);document.body.appendChild(elements.container);elements.container.focus();document.documentElement.classList.add(OPEN_CLASS_NAME);scrollbarRecompensor.addRecompense();globalEventsController.attachListeners();windowResizeActioner.runActions();elements.smw[i].n();ap.p(i);e("onOpen")};function ini(){var{autoplay,autoplays}=o.props;ii=true;p(o);data.scrollbarWidth=gsw(o);if(autoplay||autoplays.length>0)o.loc=1;s(o);o.fs.i();elements.container=document.createElement("div");elements.container.className=`${PREFIX}container ${FULL_DIMENSION_CLASS_NAME} ${FADE_IN_STRONG_CLASS_NAME}`;elements.container.setAttribute("tabindex","0");renderSlideSwipingHoverer(o);renderNav(o);renderSourceWrappersContainer(o);if(o.props.sources.length>1){renderSlideButtons(o);}createSources(o);e("onInit")}}
